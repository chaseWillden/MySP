#include "Array.h"


using namespace std;


/****************************************************************************************
 *
 ****************************************************************************************/
Array::Array(Visibility visibility, bool isStatic)
    : Variable(visibility, isStatic)
{
    this->values = map<string, Variable**>();
}


/****************************************************************************************
 *
 ****************************************************************************************/
Array::~Array() {
    map<string, Variable**>::iterator it;
    for (it = this->values.begin(); it != this->values.end(); it++) {
        delete (*it->second);
        delete it->second;
    }
}


/****************************************************************************************
 *
 ****************************************************************************************/
char Array::getType() {
    return 'a';
}


/****************************************************************************************
 *
 ****************************************************************************************/
string Array::getTypeString() {
    return "string";
}


/****************************************************************************************
 *
 ****************************************************************************************/
double Array::getNumberValue() {
    return 0;
}


/****************************************************************************************
 *
 ****************************************************************************************/
string Array::getStringValue() {
    return "ARRAY";
}


/****************************************************************************************
 *
 ****************************************************************************************/
bool Array::getBooleanValue() {
    return (this->values.size() > 0);
}


/****************************************************************************************
 *
 ****************************************************************************************/
Variable* Array::getArrayValue(string index) {
    Variable** vPointer;
    Variable* var;

    if (this->values.find(index) == this->values.end()) {
        var = new Variable(PUBLIC, false);
        vPointer = new Variable*;
        *vPointer = var;
        var->setPointer(vPointer);
        this->values[index] = vPointer;
    }

    return *(this->values[index]);
}
